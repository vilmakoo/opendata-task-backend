(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{192:function(t,e,a){},193:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(25),s=a.n(o),c=a(19),i=(a(88),a(4)),u=a.n(i),p=a(15),l=a(36),d=a(37),f=a(39),h=a(38),m=a(40),b=a(77),v=a.n(b),y=a(49),E=a.n(y),T=a(27),w=a.n(T),O=a(79),x=a(28),j=a(48),_=a.n(j),g={dataPoints:[],fetchTime:null,error:null},P=function(t){return function(){var e=Object(p.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"SET_ERROR",error:t}),setTimeout(function(){a({type:"SET_ERROR",error:null})},4e3);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ALL_DATA_POINTS":return Object(x.a)({},t,{dataPoints:e.dataPoints});case"SET_NEW_DATA_POINT":return Object(x.a)({},t,{dataPoints:[].concat(Object(O.a)(t.dataPoints),[e.dataPoints])});case"SET_ERROR":return Object(x.a)({},t,{error:e.error});case"SET_FETCH_TIME":return Object(x.a)({},t,{fetchTime:new Date});default:return t}},S=a(76),A=a.n(S),D=function(t){function e(){return Object(l.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t={yaxis:{seriesName:"dataPoints",axisTicks:{show:!0},axisBorder:{show:!0,color:"#662E9B"},labels:{style:{color:"#662E9B"}},tooltip:{enabled:!0}},xaxis:{axisTicks:{show:!1},tickPlacement:"on",labels:{formatter:function(t){return"number"===typeof t?t:function(t){if(!t)return"";var e=t.getUTCDate(),a=t.getMonth()+1,n=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2);return"".concat(e,".").concat(a,". ").concat(n,":").concat(r)}(new Date(t))}}},tooltip:{fixed:{enabled:!0,position:"topLeft",offsetY:30,offsetX:60}},legend:{position:"top",horizontalAlign:"left",offsetX:40,showForNullSeries:!1}},e=[{name:"Sensor 1",type:"line",data:this.props.sensor1?this.props.sensor1.map(function(t){return{x:t.date,y:t.data}}):[]},{name:"Sensor 2",type:"line",data:this.props.sensor2?this.props.sensor2.map(function(t){return{x:t.date,y:t.data}}):[]},{name:"Sensor 3",type:"line",data:this.props.sensor3?this.props.sensor3.map(function(t){return{x:t.date,y:t.data}}):[]},{name:"Sensor 4",type:"line",data:this.props.sensor4?this.props.sensor4.map(function(t){return{x:t.date,y:t.data}}):[]}];return r.a.createElement("div",null,r.a.createElement(A.a,{className:"chart",options:t,series:e,type:"line",width:"700px"}))}}]),e}(n.Component),N=Object(c.b)(function(t){return{sensor1:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor1}}),sensor2:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor2}}),sensor3:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor3}}),sensor4:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor4}})}})(D),C=function(t){function e(){return Object(l.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=Object(p.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getAllDataPoints();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.props.fetchNewData();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.props.getAllDataPoints();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(w.a,{variant:"h1",color:"primary",gutterBottom:!0},"Data visualization"),r.a.createElement(w.a,{variant:"h4",paragraph:!0,color:"textPrimary"},"App for visualizing data."),r.a.createElement(w.a,{variant:"h5",paragraph:!0,color:"textPrimary"},"The server will fetch a new data point hourly",r.a.createElement("br",null),"from a given API and save it to the database.",r.a.createElement("br",null),"The data points are visualized on the chart below."),r.a.createElement(E.a,{variant:"outlined",color:"primary",size:"large",onClick:e},"Fetch a new data point manually"),r.a.createElement(E.a,{variant:"outlined",color:"primary",size:"large",onClick:a},"Update the chart"),r.a.createElement("div",{className:"chart-container"},r.a.createElement(w.a,{variant:"h2",color:"primary",gutterBottom:!0},"The Chart")),r.a.createElement(N,null))))}}]),e}(n.Component),I={fetchNewData:function(){return function(){var t=Object(p.a)(u.a.mark(function t(e){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("/api/fetch_new_data");case 3:if(a=t.sent,e({type:"SET_FETCH_TIME"}),"data point already saved"!==a.data){t.next=8;break}return P("data point already saved"),t.abrupt("return");case 8:e({type:"SET_NEW_DATA_POINT",dataPoints:a.data.data}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),P(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()},getAllDataPoints:function(){return function(){var t=Object(p.a)(u.a.mark(function t(e){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("/api/get_data_points");case 3:a=t.sent,e({type:"SET_FETCH_TIME"}),e({type:"SET_ALL_DATA_POINTS",dataPoints:a.data.map(function(t){return t.data})}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),P(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()}},R=Object(c.b)(function(t){return{fetchTime:t.data.fetchTime}},I)(C),z=a(20),B=a(78),F=Object(z.c)({data:k}),M=Object(z.d)(F,Object(z.a)(B.a)),L=(a(192),function(){s.a.render(r.a.createElement(c.a,{store:M},r.a.createElement(R,null)),document.getElementById("root"))});L(),M.subscribe(L)},80:function(t,e,a){t.exports=a(193)}},[[80,1,2]]]);
//# sourceMappingURL=main.641a0e36.chunk.js.map