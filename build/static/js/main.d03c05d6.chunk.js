(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),s=n.n(o),c=n(14),i=(n(81),n(3)),u=n.n(i),p=n(9),l=n(34),d=n(35),f=n(37),v=n(36),h=n(38),m=n(46),b=n.n(m),E=n(47),O=n(24),y=n(45),w=n.n(y),j={events:[],error:null,morot:[]},x=function(e){return function(){var t=Object(p.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_ERROR",error:e}),setTimeout(function(){n({type:"SET_ERROR",error:null})},4e3);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_EVENTS":return Object(O.a)({},e,{events:t.events});case"SET_NEW_EVENT":return Object(O.a)({},e,{events:[].concat(Object(E.a)(e.events),[t.events])});case"SET_ERROR":return Object(O.a)({},e,{error:t.error});case"ADD_MORO":return Object(O.a)({},e,{morot:[].concat(Object(E.a)(e.morot),["moro"])});default:return e}},g=n(71),_=n.n(g),S=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=[{name:"Sensor 1",type:"line",data:this.props.sensor1?this.props.sensor1.map(function(e){return{x:e.date,y:e.data}}):[]},{name:"Sensor 2",type:"line",data:this.props.sensor2?this.props.sensor2.map(function(e){return{x:e.date,y:e.data}}):[]},{name:"Sensor 3",type:"line",data:this.props.sensor3?this.props.sensor3.map(function(e){return{x:e.date,y:e.data}}):[]},{name:"Sensor 4",type:"line",data:this.props.sensor4?this.props.sensor4.map(function(e){return{x:e.date,y:e.data}}):[]}];return r.a.createElement("div",null,r.a.createElement(_.a,{options:{title:{text:"Events",align:"center",margin:20,style:{fontSize:"20px"}},yaxis:{seriesName:"events",axisTicks:{show:!0},axisBorder:{show:!0,color:"#662E9B"},labels:{style:{color:"#662E9B"}},tooltip:{enabled:!0}},tooltip:{fixed:{enabled:!0,position:"topLeft",offsetY:30,offsetX:60}},legend:{position:"top",horizontalAlign:"right",offsetX:40,showForNullSeries:!1}},series:e,type:"line",width:"700px"}))}}]),t}(a.Component),T=Object(c.b)(function(e){return{sensor1:e.data.events.map(function(e){return{date:e.data.date,data:e.data.sensor1}}),sensor2:e.data.events.map(function(e){return{date:e.data.date,data:e.data.sensor2}}),sensor3:e.data.events.map(function(e){return{date:e.data.date,data:e.data.sensor3}}),sensor4:e.data.events.map(function(e){return{date:e.data.date,data:e.data.sensor4}})}})(S),N=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAllEvents();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(){var t=Object(p.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.props.fetchNewData();case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(p.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.props.getAllEvents();case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();setInterval(function(){e.props.addMoro()},5e3);var a=r.a.createElement("ul",null,this.props.morot.map(function(e,t){return r.a.createElement("li",{key:t},e)}));return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Moiccu"),a,r.a.createElement(b.a,{className:"fetch-new-event-button",variant:"outlined",size:"large",onClick:t},"Fetch a new data point"),r.a.createElement(b.a,{variant:"outlined",size:"large",onClick:n},"Get all events"),r.a.createElement("h1",null,"Charts"),r.a.createElement(T,null))}}]),t}(a.Component),R={fetchNewData:function(){return function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/api/fetch_new_data");case 3:if(n=e.sent,console.log(n),"event already saved"!==n.data){e.next=8;break}return x("event already saved"),e.abrupt("return");case 8:t({type:"SET_NEW_EVENT",events:n.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()},getAllEvents:function(){return function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/api/get_events");case 3:n=e.sent,t({type:"SET_ALL_EVENTS",events:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},addMoro:function(){return{type:"ADD_MORO"}}},A=Object(c.b)(function(e){return{morot:e.data.morot}},R)(N),D=n(15),M=n(72),C=Object(D.c)({data:k}),L=Object(D.d)(C,Object(D.a)(M.a)),z=function(){s.a.render(r.a.createElement(c.a,{store:L},r.a.createElement(A,null)),document.getElementById("root"))};z(),L.subscribe(z)},73:function(e,t,n){e.exports=n(182)}},[[73,1,2]]]);
//# sourceMappingURL=main.d03c05d6.chunk.js.map