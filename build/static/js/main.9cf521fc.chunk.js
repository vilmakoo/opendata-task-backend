(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),i=a(14),c=(a(81),a(3)),u=a.n(c),p=a(9),l=a(34),d=a(35),f=a(37),h=a(36),m=a(38),b=a(46),v=a.n(b),w=a(72),y=a(24),E=a(45),O=a.n(E),T={dataPoints:[],fetchTime:null,error:null},x=function(t){return function(){var e=Object(p.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"SET_ERROR",error:t}),setTimeout(function(){a({type:"SET_ERROR",error:null})},4e3);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ALL_DATA_POINTS":return Object(y.a)({},t,{dataPoints:e.dataPoints});case"SET_NEW_DATA_POINT":return Object(y.a)({},t,{dataPoints:[].concat(Object(w.a)(t.dataPoints),[e.dataPoints])});case"SET_ERROR":return Object(y.a)({},t,{error:e.error});case"SET_FETCH_TIME":return Object(y.a)({},t,{fetchTime:new Date});default:return t}},g=a(70),_=a.n(g),P=function(t){if(!t)return"";var e=t.getUTCDate(),a=t.getMonth()+1,n=t.getFullYear(),r=("0"+t.getHours()).slice(-2),o=("0"+t.getMinutes()).slice(-2);return"".concat(e,".").concat(a,".").concat(n," ").concat(r,":").concat(o)},k=function(t){function e(){return Object(l.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t={title:{text:"Data Points",align:"center",margin:20,style:{fontSize:"20px"}},yaxis:{seriesName:"dataPoints",axisTicks:{show:!0},axisBorder:{show:!0,color:"#662E9B"},labels:{style:{color:"#662E9B"}},tooltip:{enabled:!0}},xaxis:{axisTicks:{show:!1},tickPlacement:"on",labels:{formatter:function(t){return"number"===typeof t?t:P(new Date(t))}}},tooltip:{fixed:{enabled:!0,position:"topLeft",offsetY:30,offsetX:60}},legend:{position:"top",horizontalAlign:"right",offsetX:40,showForNullSeries:!1}},e=[{name:"Sensor 1",type:"line",data:this.props.sensor1?this.props.sensor1.map(function(t){return{x:t.date,y:t.data}}):[]},{name:"Sensor 2",type:"line",data:this.props.sensor2?this.props.sensor2.map(function(t){return{x:t.date,y:t.data}}):[]},{name:"Sensor 3",type:"line",data:this.props.sensor3?this.props.sensor3.map(function(t){return{x:t.date,y:t.data}}):[]},{name:"Sensor 4",type:"line",data:this.props.sensor4?this.props.sensor4.map(function(t){return{x:t.date,y:t.data}}):[]}];return r.a.createElement("div",null,r.a.createElement(_.a,{options:t,series:e,type:"line",width:"700px"}))}}]),e}(n.Component),D=Object(i.b)(function(t){return{sensor1:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor1}}),sensor2:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor2}}),sensor3:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor3}}),sensor4:t.data.dataPoints.map(function(t){return{date:t.date,data:t.sensor4}})}})(k),S=function(t){function e(){return Object(l.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=Object(p.a)(u.a.mark(function t(){var e=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getAllDataPoints();case 2:setInterval(function(){console.log("fetching new data at",new Date),e.props.fetchNewData()},36e5);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.props.fetchNewData();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.props.getAllDataPoints();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Data visualization"),r.a.createElement("p",null,"This app fetches a new data point from a given api every hour and adds it to the chart."),r.a.createElement("p",null,"Last data point was fetched at ",P(this.props.fetchTime),"."),r.a.createElement("p",null,"These buttons are meant for developing:"),r.a.createElement(v.a,{variant:"outlined",size:"large",onClick:e},"Fetch a new data point"),r.a.createElement(v.a,{variant:"outlined",size:"large",onClick:a},"Get all data points"),r.a.createElement("h1",null,"Charts"),r.a.createElement(D,null))}}]),e}(n.Component),A={fetchNewData:function(){return function(){var t=Object(p.a)(u.a.mark(function t(e){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/api/fetch_new_data");case 3:if(a=t.sent,e({type:"SET_FETCH_TIME"}),"data point already saved"!==a.data){t.next=8;break}return x("data point already saved"),t.abrupt("return");case 8:e({type:"SET_NEW_DATA_POINT",dataPoints:a.data.data}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),x(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()},getAllDataPoints:function(){return function(){var t=Object(p.a)(u.a.mark(function t(e){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/api/get_data_points");case 3:a=t.sent,e({type:"SET_ALL_DATA_POINTS",dataPoints:a.data.map(function(t){return t.data})}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),x(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}},N=Object(i.b)(function(t){return{fetchTime:t.data.fetchTime}},A)(S),R=a(15),C=a(71),I=Object(R.c)({data:j}),L=Object(R.d)(I,Object(R.a)(C.a)),z=function(){s.a.render(r.a.createElement(i.a,{store:L},r.a.createElement(N,null)),document.getElementById("root"))};z(),L.subscribe(z)},73:function(t,e,a){t.exports=a(182)}},[[73,1,2]]]);
//# sourceMappingURL=main.9cf521fc.chunk.js.map